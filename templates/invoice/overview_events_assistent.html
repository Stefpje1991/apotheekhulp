{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<div class="container-xxl flex-grow-1 container-p-y">
   <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Assistent /</span> Overzicht Openstaande Prestaties</h4>
   <div class="row">
      <div class="col-md-12">
         <div class="card mb-4">
            <!-- Account -->
            <div class="card-body">
               {% if te_bekijken_events_door_assistent.exists %}
               <table id="tbl_overzicht_prestaties_assistent" class="table table-hover">
                  <thead>
                     <tr>
                        <th class="text-center">Datum</th>
                        <th class="text-center">Startuur</th>
                        <th class="text-center">Einduur</th>
                        <th class="text-center">Pauzeduur in minuten</th>
                        <th class="text-center">Naam Apotheek</th>
                        <th class="text-center"></th>
                        <th class="text-center"></th>
                     </tr>
                  </thead>
                  <tbody class="table-border-bottom-0">
                  {% for event in te_bekijken_events_door_assistent %}
                     <tr>
                        <td align="center">{{ event.start_time|date:"d/m/Y" }}</td>
                        <td align="center">{{ event.start_time|time:"H:i" }}</td>
                        <td align="center">{{ event.end_time|time:"H:i" }}</td>
                        <td align="center">{{ event.pauzeduur }}</td>
                        <td align="center">{{ event.apotheek.user.first_name }} {{ event.apotheek.user.last_name }}</td>
                        <td align="center">
                           <span class="badge bg-success" style="cursor: pointer;" onclick="updateStatusAssistent('{{ event.id }}', 'Accepted')">Goedkeuren</span>
                        </td>
                        <td align="center">
                           <span class="badge bg-danger" style="cursor: pointer;" onclick="updateStatusAssistent('{{ event.id }}', 'Declined')">Weigeren</span>
                        </td>
                     </tr>
                  {% endfor %}
                  </tbody>
               </table>
               {% else %}
               <p align="center">Geen openstaande prestaties gevonden</p>
               {% endif %}
            </div>
         </div>
      </div>
   </div>

   <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Assistent /</span> Overzicht Nog Te Factureren</h4>
   <div class="row">
      <div class="col-md-12">
         <div class="card mb-4">
            <!-- Account -->
            <div class="card-body">
               {% if nog_te_factureren_events.exists %}
               <table id="tbl_overzicht_nog_te_factureren_assistent" class="table table-hover">
                  <thead>
                     <tr>
                        <th class="text-center">Datum</th>
                        <th class="text-center">Startuur</th>
                        <th class="text-center">Einduur</th>
                        <th class="text-center">Pauzeduur in minuten</th>
                        <th class="text-center">Naam Apotheek</th>
                     </tr>
                  </thead>
                  <tbody class="table-border-bottom-0">
                  {% for event in nog_te_factureren_events %}
                     <tr>
                        <td align="center">{{ event.start_time|date:"d/m/Y" }}</td>
                        <td align="center">{{ event.start_time|time:"H:i" }}</td>
                        <td align="center">{{ event.end_time|time:"H:i" }}</td>
                        <td align="center">{{ event.pauzeduur }}</td>
                        <td align="center">{{ event.apotheek.user.first_name }} {{ event.apotheek.user.last_name }}</td>
                     </tr>
                  {% endfor %}
                  </tbody>
               </table>
               {% else %}
               <p align="center">Geen prestaties om te factureren gevonden</p>
               {% endif %}
            </div>
         </div>
      </div>
   </div>
</div>
{% endblock %}